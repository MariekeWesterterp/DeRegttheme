{% import "/DeRegt/macro/margin-padding.html" as macros %}

{% macro color_to_rgba(value) %}
  {% if value %}
    {% if value is string %}
      {{ value }}
    {% elif value.color %}
      {% set opacity = value.opacity if value.opacity is not none else 100 %}
      rgba({{ value.color|convert_rgb }}, {{ opacity / 100 }})
    {% endif %}
  {% endif %}
{% endmacro %}


{% set heading_tag = module.style.heading_tag if module.style and module.style.heading_tag else 'h2' %}
{% set highlights = module.highlights if module.highlights else [] %}
{% set button_group = module.button %}
{% set button_text = button_group.text|trim if button_group and button_group.text else '' %}
{% set button_url = button_group.url if button_group and button_group.url else none %}
{% set button_href = button_url.href if button_url and button_url.href else '' %}
{% set button_target = button_url.target if button_url and button_url.target else ('_blank' if button_url and button_url.open_in_new_tab else '_self') %}
{% set button_rel = 'noopener' if button_target == '_blank' else none %}
{% set button_cta = button_group.cta_field if button_group %}
{% set has_manual_button = button_text and button_href %}
{% set has_button = has_manual_button or button_cta %}
{% set button_style = button_group.style if button_group and button_group.style else 'primary' %}
{% set button_class = 'btn-primary' %}
{% if button_style == 'secondary' %}
  {% set button_class = 'btn-secondary' %}
{% elif button_style == 'secondary-white' %}
  {% set button_class = 'btn-secondary btn-secondary-white' %}
{% endif %}


{% set style_settings = module.style if module.style else {} %}



{% if module.anchor %}
  <a id="{{ module.anchor }}" data-hs-anchor="true"></a>
{% endif %}

<section class="cta-whitepaper {{ macros.margin_padding(module.style.margin_block, '') }}">
  <div class="container">
    <div class=" cta-whitepaper__inner {{ macros.margin_padding('', module.style.padding_block) }}" {% if color_to_rgba(module.style.backgroundcolor)|trim or color_to_rgba(module.style.text_color)|trim %} style="{% if color_to_rgba(module.style.backgroundcolor)|trim %}background-color: {{ color_to_rgba(module.style.backgroundcolor)|trim }}; {% endif %} {% if color_to_rgba(module.style.text_color)|trim %}color: {{ color_to_rgba(module.style.text_color)|trim }}; {% endif %}"{% endif %}>
    <div class="cta-whitepaper__content">
      {% if module.heading %}
        <div class="cta-whitepaper__heading">
          <{{ heading_tag }} class="cta-whitepaper__title">{{ module.heading }}</{{ heading_tag }}>
            </div>
          {% endif %}

          {% if highlights|length %}
            <ul class="cta-whitepaper__list">
              {% for item in highlights %}
                {% set item_text = item.text|trim if item.text else '' %}
                {% if item_text %}
                  <li class="cta-whitepaper__list-item">
                    <span class="cta-whitepaper__icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <g clip-path="url(#clip0_631_4632)">
                          <path d="M3.75 13.5L9 18.75L21 6.75" stroke="#152B56" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </g>
                        <defs>
                          <clipPath id="clip0_631_4632">
                            <rect width="24" height="24" fill="white"/>
                          </clipPath>
                        </defs>
                      </svg>
                    </span>
                    <span class="cta-whitepaper__list-text">{{ item_text }}</span>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          {% endif %}

          {% if has_button %}
            <div class="cta-whitepaper__cta">
              {% if has_manual_button %}
                <a href="{{ button_href|escape_url }}" class="{{ button_class }}" target="{{ button_target }}"{% if button_rel %} rel="{{ button_rel }}"{% endif %}>{{ button_text }}</a>
              {% else %}
                <div class="cta-whitepaper__cta-embed">
                  {% cta guid="{{ button_cta }}" %}
                </div>
              {% endif %}
            </div>
          {% endif %}
        </div>

        {% if module.image.src %}
          <div class="cta-whitepaper__media">
            
              {% set desktop_loading = module.image.loading != 'disabled' ? 'loading=\"' ~ module.image.loading|escape_attr ~ '\"' : '' %}
              {% set desktop_width = module.image.width if module.image.width else module.image.max_width %}
              {% set desktop_height = module.image.height if module.image.height else module.image.max_height %}
              {% set desktop_dimensions = '' %}
              {% if desktop_width and desktop_height %}
                {% set desktop_dimensions = 'width=\"' ~ desktop_width|escape_attr ~ '\" height=\"' ~ desktop_height|escape_attr ~ '\"' %}
              {% endif %}
              <img class="cta-whitepaper__image" src="{{ module.image.src|escape_url }}" alt="{{ module.image.alt|default('Whitepaper cover')|escape_attr }}"{% if desktop_loading %} {{ desktop_loading|safe }}{% endif %}{% if desktop_dimensions %} {{ desktop_dimensions|safe }}{% endif %}>

          </div>
        {% endif %}
  </div>
  </div>

</section>
